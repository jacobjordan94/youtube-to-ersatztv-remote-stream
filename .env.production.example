# Production Environment Variables Reference
# This file documents all production environment variables and where they should be set

# ============================================
# Backend (Cloudflare Workers)
# ============================================
# Backend configuration is managed via wrangler.toml and wrangler CLI
# DO NOT create a .env.production file in packages/backend/

# YouTube Data API v3 Key
# How to set: cd packages/backend && pnpm wrangler secret put YOUTUBE_API_KEY
# Get yours at: https://console.cloud.google.com/apis/credentials
# Required: Yes

# Environment identifier (affects CORS, logging, etc.)
# How to set: Add to packages/backend/wrangler.toml under [vars] section
# Example: ENVIRONMENT = "production"
# Options: production | staging | development
# Required: Yes

# Cloudflare KV Namespace ID (for caching and rate limiting)
# How to set: Add to packages/backend/wrangler.toml under [[kv_namespaces]] section
# Create via: cd packages/backend && pnpm wrangler kv:namespace create CACHE
# Required: Yes (for production rate limiting and caching)

# ============================================
# Frontend (Cloudflare Pages)
# ============================================
# Frontend configuration goes in: packages/frontend/.env.production

# Backend API URL
# How to set: Add to packages/frontend/.env.production
# Should point to your deployed Cloudflare Worker
# Example: VITE_API_URL=https://ersatztv-to-yt-api.jjordankta94.workers.dev
# Required: Yes

# ============================================
# Deployment Notes
# ============================================

# 1. Backend Secrets (Cloudflare Workers)
#    Set via Wrangler CLI:
#    wrangler secret put YOUTUBE_API_KEY
#    wrangler secret put ENVIRONMENT

# 2. Frontend Environment (Cloudflare Pages)
#    Set in Cloudflare Pages dashboard:
#    Settings > Environment Variables > Production
#    Add: VITE_API_URL

# 3. KV Namespace Setup
#    a. Create namespace: wrangler kv:namespace create CACHE
#    b. Copy the ID from output
#    c. Add to wrangler.toml under [[kv_namespaces]]
#    d. Set binding name to "CACHE"

# 4. Custom Domain Setup
#    a. Add custom domain in Cloudflare Pages/Workers
#    b. Update CORS origin in backend (src/index.ts)
#    c. Update VITE_API_URL to match your domain

# 5. CORS Configuration
#    The backend is configured for: https://youtube-to-ersatztv.jacob-jordan.me
#    If using a different domain, update src/index.ts line 16

# ============================================
# Security Checklist
# ============================================

# ✓ YOUTUBE_API_KEY stored as Cloudflare secret (not in .env)
# ✓ ENVIRONMENT set to 'production'
# ✓ CORS restricted to specific domain
# ✓ Rate limiting enabled (60 req/min per IP)
# ✓ Security headers enabled (CSP, X-Frame-Options, etc.)
# ✓ KV namespace for caching configured
# ✓ Custom domain with HTTPS configured
